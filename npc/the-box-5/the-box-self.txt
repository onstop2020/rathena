prontera,300,290,0	script	THE BOX#SELF	566,{
	if(strcharinfo(3) == "prontera")
		end;
	
	// Prevent cheating
	if(!isReadyToClaimed){
		message strcharinfo(0),"รับไปแล้ว";
		end;
	}
	
	// Combo
	if(latestCombo > 0){
		combo = cap_value(combo + latestCombo,0,100);
		sc_end SC_EXPBOOST;
		sc_start SC_EXPBOOST,1800000,combo;
		sc_end SC_ITEMBOOST;
		sc_start SC_ITEMBOOST,1800000,combo;
	}
	
	isReadyToClaimed = 0;
	
	// Map Limitation
	.@lastFoundMapAmount = getarraysize(lastFoundTheBoxMap$);
	
	.@index = .@lastFoundMapAmount;
	
	if(.@lastFoundMapAmount > 0){
		for(.@i = 0; .@i < .@lastFoundMapAmount; .@i++){
			if(lastFoundTheBoxMap$[.@i] == strcharinfo(3)){
				.@index = .@i;
				
				break;
			}
		}
	}
	
	setarray lastFoundTheBoxMap$[.@index],strcharinfo(3);
	setarray mapLimitation[.@index],mapLimitation[.@index] + 1;
	
	GetTheBoxItem();
	
	if(mapLimitation[.@index] >= $maximumMapLimitation){
		if(tired >= 100){
			cloakonnpcself;
			
			message strcharinfo(0),"จำนวน THE BOX คงเหลือภายใน Map นี้ (สำหรับคุณ) " + mapLimitation[.@index] + "/" + $maximumMapLimitation;
			
			end;
		}
		if(!#isChooseToRepeatTheBox)
		goto L_Repeat;
		mes "จำนวน THE BOX คงเหลือภายใน Map นี้ (สำหรับคุณ) ไม่เหลือแล้ว คุณต้องการ Reset หรือไม่?";
		next;
		menu "ไม่ต้องการ",-,"ต้องการ (ตัวละครจะเหนื่อย)",L_Repeat;
		cloakonnpcself;
		end;
		
		L_Repeat:
		cloakonnpcself;
		mapLimitation[.@index] = 0;
		tired = cap_value(tired + 10,0,100);
		RefreshDebuff();
		message strcharinfo(0),"จำนวน THE BOX คงเหลือภายใน Map นี้ (สำหรับคุณ) " + mapLimitation[.@index] + "/" + $maximumMapLimitation;
		end;
	}
	else{
		cloakonnpcself;
		
		message strcharinfo(0),"จำนวน THE BOX คงเหลือภายใน Map นี้ (สำหรับคุณ) " + mapLimitation[.@index] + "/" + $maximumMapLimitation;
	}
	
	end;
}
